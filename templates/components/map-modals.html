<!-- ピン登録モーダル -->
<div id="pinModal" class="unified-modal hidden" aria-hidden="true" role="dialog" aria-labelledby="pinModalTitle">
    <div class="modal-content">
        <div class="modal-header">
            <div class="title">ピンを登録</div>
        </div>

        <div class="modal-body">
            <form id="pinForm">
                <label class="block mb-2">名称（1〜30文字）<span class="text-red-500">*</span></label>
                <input type="text" name="title" id="pinTitle" maxlength="30" class="w-full border p-2 mb-3" required>

                <label class="block mb-2">分類<span class="text-red-500">*</span></label>
                <select name="category" id="pinCategory" class="w-full border p-2 mb-3" required>
                    <option value="">選択してください</option>
                    <option value="1">🍽️ 食べる</option>
                    <option value="2">👁️ 見る</option>
                    <option value="3">🎮 遊ぶ</option>
                    <option value="4">📚 学ぶ</option>
                    <option value="5">🎯 体験する</option>
                    <option value="6">🔍 探索する</option>
                    <option value="7">🛋️ 休憩する</option>
                    <option value="8">🏨 泊まる</option>
                    <option value="9">📸 フォトスポット</option>
                    <option value="10">🎪 イベント</option>
                    <option value="11">⚠️ 注意！</option>
                    <option value="12">📦 その他</option>
                </select>

                <div>
                    <label class="block mb-2">住所</label>
                    <input type="text" id="pinAddress" class="w-full border p-2 mb-3" placeholder="例: 岩手県一関市大町1-1">

                    <div style="margin-top:8px;">
                         <button type="button" id="pickAddressBtn" class="btn pick-address-btn">地図から住所を指定する</button>
                    </div>
                </div>

                <label class="block mb-2">場所の説明<span class="text-red-500">*</span></label>
                <textarea name="description" id="pinDescription" class="w-full border p-2 mb-3" required></textarea>

                <label class="block mb-2">注意事項</label>
                <textarea name="caution" id="pinCaution" class="w-full border p-2 mb-3"></textarea>

                <label class="block mb-2">写真（png/jpeg）</label>
                <input type="file" name="image" id="pinImage" accept="image/png, image/jpeg" class="w-full mb-3">

                <label class="block mb-2">表示期限</label>
                <input type="datetime-local" name="expires_at" id="pinExpiresAt" class="w-full border p-2 mb-3">

                <div class="modal-footer">
                    <button type="button" id="cancelPin" class="unified-btn cancel">キャンセル</button>
                    <button type="submit" class="unified-btn primary">登録する</button>
                </div>
            </form>
        </div>
    </div>
</div>

<!-- Address picker modal (full-screen overlay) -->
<div id="addressPickerModal" class="unified-modal hidden" aria-hidden="true" role="dialog" aria-labelledby="addressPickerTitle">
    <div class="modal-content full-screen">
        <h2 id="addressPickerTitle">追加したい地点を選択してください。</h2>
        <p class="picker-instruction" style="margin-bottom:8px;">地図上で地点をクリックしてください。クリック後、自動的に住所が入力されます。</p>
        <div id="map" style="width:100%; height:70vh;"></div>
        <div class="modal-footer">
            <button type="button" class="cancel-picker-btn">キャンセル</button>
        </div>
    </div>
</div>

<!-- 分類一覧モーダル -->
<div id="categoryModal" class="unified-modal hidden" aria-hidden="true">
    <div class="modal-content">
        <div class="modal-header">
            <div class="title">分類を選択</div>
        </div>
        <div class="modal-body">
            <div id="categoryList" class="grid grid-cols-3 gap-2"></div>
        </div>
        <div class="modal-footer">
            <button id="cancelCategoryBtn" class="unified-btn secondary">キャンセル</button>
        </div>
    </div>
</div>

<!-- ピン名一覧モーダル -->
<div id="pinListModal" class="unified-modal hidden" aria-hidden="true">
    <div class="modal-content">
        <div class="modal-header">
            <div id="pinListTitle" class="title">分類のピン</div>
        </div>
        <div class="modal-body">
            <ul id="pinList" class="unified-list"></ul>
        </div>
        <div class="modal-footer">
            <button id="closePinListModalFooter" class="unified-btn secondary">閉じる</button>
        </div>
    </div>
</div>
